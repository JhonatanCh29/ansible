# roles/gestion_procesos_servicios/tasks/main.yml

- name: ğŸ“Œ Mostrar procesos activos
  ansible.builtin.shell: "ps aux"
  register: procesos
  changed_when: false

- name: ğŸ“„ Mostrar salida de procesos
  ansible.builtin.debug:
    var: procesos.stdout

- name: âœ… Asegurar que los servicios esenciales estÃ¡n activos y habilitados
  ansible.builtin.systemd:
    name: "{{ item }}"
    state: started
    enabled: yes
  loop: "{{ servicios_esenciales }}"

- name: ğŸ” Mostrar servicios en ejecuciÃ³n
  ansible.builtin.shell: "systemctl --type=service --state=running"
  register: servicios
  changed_when: false

- name: ğŸ“„ Mostrar salida de los servicios
  ansible.builtin.debug:
    var: servicios.stdout
