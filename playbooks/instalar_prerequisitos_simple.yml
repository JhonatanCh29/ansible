---
# Playbook simplificado para instalar servicios bÃ¡sicos
- name: ðŸ”§ Instalar servicios prerequisitos (simplificado)
  hosts: lab_academico
  become: yes
  gather_facts: yes
  
  tasks:
    - name: ðŸ“¦ Instalar openssh-server en Fedora
      package:
        name: openssh-server
        state: present
      when: ansible_facts['os_family'] == "RedHat"
      
    - name: ðŸ“¦ Instalar cron en Fedora
      package:
        name: cronie
        state: present
      when: ansible_facts['os_family'] == "RedHat"
      
    - name: ðŸ“¦ Instalar servicios en Ubuntu/Mint
      package:
        name:
          - openssh-server
          - cron
        state: present
      when: ansible_facts['os_family'] == "Debian"
      
    - name: ðŸš€ Habilitar SSH en Fedora
      service:
        name: sshd
        enabled: yes
        state: started
      when: ansible_facts['os_family'] == "RedHat"
      ignore_errors: yes
      
    - name: ðŸš€ Habilitar cron en Fedora
      service:
        name: crond
        enabled: yes
        state: started
      when: ansible_facts['os_family'] == "RedHat"
      ignore_errors: yes
      
    - name: ðŸš€ Habilitar servicios en Ubuntu/Mint
      service:
        name: "{{ item }}"
        enabled: yes
        state: started
      loop:
        - ssh
        - cron
      when: ansible_facts['os_family'] == "Debian"
      ignore_errors: yes
      
    - name: âœ… Verificar servicios instalados
      debug:
        msg: "Servicios bÃ¡sicos instalados en {{ inventory_hostname }}"